<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
			 xmlns:vm="using:SteamStorage.ViewModels"
			 xmlns:m="using:SteamStorage.Models"
			 xmlns:converters="using:SteamStorage.Resources.Converters"
             mc:Ignorable="d" 
			 d:DesignWidth="1440" d:DesignHeight="1024"
             x:Class="SteamStorage.Views.MainView"
			 x:DataType="vm:MainViewModel">

	<UserControl.Resources>
		<converters:DoubleLessConverter x:Key="DoubleLessConverter"/>
	</UserControl.Resources>

	<Grid ColumnDefinitions="Auto, *" Margin="30">

		<Border x:Name="MenuBorder"
				Classes="BigRounded BackgroundAdditional"
				Grid.Column="0">

			<Border.Styles>
				<Style Selector="Border#MenuBorder">
					<Setter Property="Width" Value="100"/>
				</Style>
				<Style Selector="Border#MenuBorder:pointerover">
					<Setter Property="Width" Value="300"/>
				</Style>
				
				<Style Selector="Border#MenuBorder TextBlock#UserName, 
								 Border#MenuBorder TextBlock#SteamId">
					<Setter Property="Opacity" Value="0"/>
				</Style>
				
				<Style Selector="Border#MenuBorder:pointerover TextBlock#UserName">
					<Setter Property="Opacity" Value="1"/>
				</Style>
				<Style Selector="Border#MenuBorder:pointerover TextBlock#SteamId">
					<Setter Property="Opacity" Value="0.5"/>
				</Style>				

				<Style Selector="Border#MenuBorder Border#Profile">
					<Setter Property="Height" Value="64"/>
					<Setter Property="Width" Value="64"/>
					<Setter Property="CornerRadius" Value="10"/>
				</Style>
				<Style Selector="Border#MenuBorder:pointerover Border#Profile">
					<Setter Property="Height" Value="128"/>
					<Setter Property="Width" Value="128"/>
					<Setter Property="CornerRadius" Value="20"/>
				</Style>
				
			</Border.Styles>

			<Grid RowDefinitions="128, 50, 25, *, 380, *, 140" Margin="0, 20">

				<Border x:Name="Profile" 
						VerticalAlignment="Top"
						Grid.Row="0">
					<Grid>
						<Border Classes="Background"
								Opacity="0.5"/>
						<Image Classes="AccountImage"
							   Margin="16"/>
						<Image asyncImageLoader:ImageLoader.Source="{Binding ImageUrl}"/>
					</Grid>
				</Border>
				
				<TextBlock x:Name="UserName" 
						   Text="{Binding UserName}" 
						   Classes="Center BigText" 
						   Grid.Row="1"/>

				<TextBlock x:Name="SteamId" 
						   Text="{Binding SteamId}" 
						   Classes="Center SmallText" 
						   Grid.Row="2"/>

				<Rectangle Height="2" MaxWidth="180" 
						   Margin="20, 0" 
						   Grid.Row="3"/>
				
				<ListBox ItemsSource="{Binding NavigationOptions}" 
						 SelectionMode="Single"
						 SelectedItem="{Binding SelectedNavigationModel}"
						 Background="Transparent"
						 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
						 ScrollViewer.VerticalScrollBarVisibility="Disabled"
						 Classes.Min="{Binding $self.Bounds.Width, Converter={StaticResource DoubleLessConverter}, ConverterParameter=160}"
						 Grid.Row="4">

					<ListBox.Styles>
						<Style Selector="ListBox ListBoxItem">
							<Setter Property="Template">
								<Setter.Value>
									<ControlTemplate x:DataType="m:NavigationModel">
										<Border Background="Transparent">
											<Grid>
												<Border x:Name="PointerOverBorder"
														Classes="Background"
														Opacity="0"/>
												<Border x:Name="Selected"
														Height="40" Width="10"
														CornerRadius="0, 20, 20, 0"
														HorizontalAlignment="Left"
														VerticalAlignment="Center"
														IsVisible="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}, Path=IsSelected}"
														Classes="Accent"/>
												<Grid x:Name="ContentGrid"
													  Height="60"
													  Margin="20, 0">
													<Border x:Name="ItemBorder"
															Classes="BigRounded"
															Classes.Background="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}, Path=IsSelected}"
															Opacity="0.5"/>
													<Grid x:Name="GridTitle"
														  ColumnDefinitions="60, *">
														<ContentPresenter Content="{Binding Image}"
																		  Margin="14"
																		  Grid.Column="0"/>
														<TextBlock x:Name="TitleTextBlock"
																   Text="{Binding Title}"
																   Classes="MiddleText"
																   IsVisible="True"
																   Grid.Column="1"/>
													</Grid>
												</Grid>	
											</Grid>
										</Border>
									</ControlTemplate>
								</Setter.Value>
							</Setter>
							<Style Selector="^:pointerover /template/ Border#PointerOverBorder">
								<Setter Property="Opacity" Value="0.3"/>
							</Style>
						</Style>

						<Style Selector="ListBox.Min ListBoxItem /template/ Grid#ContentGrid">
							<Setter Property="Margin" Value="20, 0"/>
						</Style>

						<Style Selector="ListBox.Min ListBoxItem /template/ Border#ItemBorder">
							<Setter Property="CornerRadius" Value="10"/>
						</Style>

						<Style Selector="ListBox.Min ListBoxItem /template/ TextBlock#TitleTextBlock">
							<Setter Property="IsVisible" Value="False"/>
						</Style>
						
					</ListBox.Styles>
					
					<ListBox.ItemsPanel>
						<ItemsPanelTemplate>
							<StackPanel Spacing="20" Margin="0"/>
						</ItemsPanelTemplate>
					</ListBox.ItemsPanel>

				</ListBox>

				<Grid Grid.Row="4">



				</Grid>

				<Rectangle Height="2" MaxWidth="180" 
						   Margin="20, 0" 
						   Grid.Row="5"/>

				<Grid Grid.Row="6">

				</Grid>

			</Grid>

		</Border>
		
		<ContentPresenter Content="{Binding CurrentVM}" Grid.Column="1"/>

	</Grid>

</UserControl>
